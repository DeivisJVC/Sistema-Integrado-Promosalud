<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Agenda de Pacientes</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
  <section class="card">
    <div class="card-header">
      <h3>Agenda de Pacientes</h3>
      <div class="d-flex">
        <input type="date" id="filter_date" class="form-control me-2" placeholder="Filtrar por Fecha">
        <input type="text" id="filter_name" class="form-control me-2" placeholder="Filtrar Paciente">
        <input type="text" id="filter_doctor" class="form-control me-2" placeholder="Filtrar por doctor">
        <label for="documentType" class="form-label me-2">Seleccionar Documento</label>
        <select class="form-select me-2" id="documentType">
          <option selected class="form-select-option is-invalid">Seleccione...</option>
          <option class="form-select-option" value="Cédula de ciudadanía">Cédula de ciudadanía</option>
          <option class="form-select-option" value="Cédula extranjera">Cédula extranjera</option>
          <option class="form-select-option" value="Permiso temporal de trabajo">Permiso temporal de trabajo</option>
          <option class="form-select-option" value="NIT">NIT</option>
          <option class="form-select-option" value="Tarjeta de identidad">Tarjeta de identidad</option>
          <option class="form-select-option" value="Pasaporte">Pasaporte</option>
          <option class="form-select-option" value="Registro civil">Registro civil</option>
          <option class="form-select-option" value="Carné diplomático">Carné diplomático</option>
          <option class="form-select-option" value="Certificado nacido vivo">Certificado nacido vivo</option>
        </select>
        <input type="text" id="filter_id" class="form-control me-2" placeholder="Numero de Documento">
        <button class="btn btn-primary me-2" onclick="filterAgenda()">Filtrar</button>
        <button class="btn btn-secondary" onclick="clearFilterAgenda()">Limpiar</button>
      </div>
    </div>
    <div class="card-body">
      <table id="patient_table" class="table table-striped table-responsive">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Hora</th>
            <th>Nombre del Paciente</th>
            <th>Doctor</th>
            <th class="d-none">Tipo de Documento</th> <!-- Agregar clase d-none para ocultar -->
            <th class="d-none">Número de Documento</th>
            <th>Orden Adjunta</th>
            <th>Seleccionar</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>2024-11-15</td>
            <td>10:00 AM</td>
            <td>Juan Pérez</td>
            <td>Dra. Gómez</td>
            <td class="d-none">Cédula de ciudadanía</td>
            <td class="d-none">123456</td>
            <td><button class="btn btn-sm btn-info">Ver</button></td>
            <td><input id="checkboxdescargar" type="checkbox" class="form-check-input select-patient p-2"></td>
          </tr>
          <tr>
            <td>2024-11-15</td>
            <td>11:00 AM</td>
            <td>María López</td>
            <td>Dr. Martínez</td>
            <td class="d-none">Cédula extranjera</td>
            <td class="d-none">789012</td>
            <td><button class="btn btn-sm btn-info">Ver</button></td>
            <td><input type="checkbox" class="form-check-input select-patient p-2"></td>
          </tr>
          <tr>
            <td>2024-11-16</td>
            <td>09:00 AM</td>
            <td>Carlos Ruiz</td>
            <td>Dra. Gómez</td>
            <td class="d-none">Permiso temporal de trabajo</td>
            <td class="d-none">1082998</td>
            <td><button class="btn btn-sm btn-info">Ver</button></td>
            <td><input type="checkbox" class="form-check-input select-patient p-2"></td>
          </tr>
          <tr>
            <td>2024-11-16</td>
            <td>09:00 AM</td>
            <td>Carlos Ruiz</td>
            <td>Dra. Gómez</td>
            <td class="d-none">Cédula de ciudadanía</td>
            <td class="d-none">123456789</td>
            <td><button class="btn btn-sm btn-info">Ver</button></td>
            <td><input type="checkbox" class="form-check-input select-patient p-2"></td>
          </tr>
          <tr>
            <td>2024-11-16</td>
            <td>10:00 AM</td>
            <td>Lucía Fernández</td>
            <td>Dr. Pérez</td>
            <td class="d-none">Pasaporte</td>
            <td class="d-none">123456</td>
            <td><button class="btn btn-sm btn-info">Ver</button></td>
            <td><input type="checkbox" class="form-check-input select-patient p-2"></td>
          </tr>
          <tr>
            <td>2024-11-15</td>
            <td>10:00 AM</td>
            <td>Juan Pérez</td>
            <td>Dra. Gómez</td>
            <td class="d-none">Cédula de ciudadanía</td>
            <td class="d-none">123456</td> <!-- Valor de la cédula -->
            <td><button class="btn btn-sm btn-info">Ver</button></td>
            <td><input id="checkboxdescargar" type="checkbox" class="form-check-input select-patient p-2 "></td>
          </tr>
          <tr>
            <td>2024-11-15</td>
            <td>11:00 AM</td>
            <td>María López</td>
            <td>Dr. Martínez</td>
            <td class="d-none">Cédula extranjera</td>
            <td class="d-none">789012</td> <!-- Valor del tipo de documento -->
            <td><button class="btn btn-sm btn-info">Ver</button></td>
            <td><input type="checkbox" class="form-check-input select-patient p-2"></td>
          <tr>
            <td>2024-11-16</td>
            <td>09:00 AM</td>
            <td>Carlos Ruiz</td>
            <td>Dra. Gómez</td>
            <td class="d-none">Permiso temporal de trabajo</td>
            <td class="d-none">1082998</td>
            <td><button class="btn btn-sm btn-info">Ver</button></td>
            <td><input type="checkbox" class="form-check-input select-patient p-2 "></td>
          </tr>
          <tr>
            <td>2024-11-16</td>
            <td>09:00 AM</td>
            <td>Carlos Ruiz</td>
            <td>Dra. Gómez</td>
            <td class="d-none">Cédula de ciudadanía</td>
            <td class="d-none">123456789</td>
            <td><button class="btn btn-sm btn-info">Ver</button></td>
            <td><input type="checkbox" class="form-check-input select-patient p-2 "></td>
          </tr>
          <tr>
            <td>2024-11-16</td>
            <td>10:00 AM</td>
            <td>Lucía Fernández</td>
            <td>Dr. Pérez</td>
            <td class="d-none">Pasaporte</td>
            <td class="d-none">123456</td>
            <td><button class="btn btn-sm btn-info">Ver</button></td>
            <td><input type="checkbox" class="form-check-input select-patient p-2 "></td>
        </tbody>
      </table>
    </div>
  </section>

  <script>
    function normalizeText(text) {
      return text.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
    }

    function clearCheckboxes() {
      document.querySelectorAll(".select-patient").forEach((checkbox) => (checkbox.checked = false));
      document.getElementById("checkboxdescargar").checked = false;

      document.getElementById("checkboxdescargar").addEventListener("change", function () {
        document.querySelectorAll(".select-patient").forEach((checkbox) => (checkbox.checked = this.checked));
      });
    }

    function filterAgenda() {
      const filterDate = document.getElementById("filter_date").value;
      const filterName = normalizeText(document.getElementById("filter_name").value);
      const filterDoctor = normalizeText(document.getElementById("filter_doctor").value);
      const filterType_document = normalizeText(document.getElementById("documentType").value);
      const filterId = normalizeText(document.getElementById("filter_id").value);
      const table = document.getElementById("patient_table");
      const tr = table.getElementsByTagName("tr");

      for (let i = 1; i < tr.length; i++) {
        const tdDate = tr[i].getElementsByTagName("td")[0];
        const tdName = tr[i].getElementsByTagName("td")[2];
        const tdDoctor = tr[i].getElementsByTagName("td")[3];
        const tdType_document = tr[i].getElementsByTagName("td")[4];
        const tdId = tr[i].getElementsByTagName("td")[5];

        if (tdDate && tdName && tdDoctor && tdId) {
          const dateValue = tdDate.textContent || tdDate.innerText;
          const nameValue = normalizeText(tdName.textContent || tdName.innerText);
          const doctorValue = normalizeText(tdDoctor.textContent || tdDoctor.innerText);
          const filterType_documentValue = normalizeText(tdType_document.textContent || tdType_document.innerText);
          const idValue = normalizeText(tdId.textContent || tdId.innerText);

          if (
            (filterDate === "" || dateValue.indexOf(filterDate) > -1) &&
            (filterName === "" || nameValue.indexOf(filterName) > -1) &&
            (filterDoctor === "" || doctorValue.indexOf(filterDoctor) > -1) &&
            (filterType_document === "" || filterType_documentValue.indexOf(filterType_document) > -1) &&
            (filterId === "" || idValue.indexOf(filterId) > -1)
          ) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    }

    function clearFilterAgenda() {
      document.getElementById("filter_date").value = "";
      document.getElementById("filter_name").value = "";
      document.getElementById("filter_doctor").value = "";
      document.getElementById("documentType").value = "";
      document.getElementById("filter_id").value = "";
      filterAgenda();
      clearCheckboxes();
    }

    window.onload = filterAgenda;
  </script>
</body>